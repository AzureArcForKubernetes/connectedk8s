{"name":"azure-arc","info":{"first_deployed":"2024-12-03T16:35:01.1597241-08:00","last_deployed":"2024-12-03T16:35:01.1597241-08:00","deleted":"","description":"Release \"azure-arc\" failed: 1 error occurred:\n\t* ConfigMap in version \"v1\" cannot be handled as a ConfigMap: json: cannot unmarshal number into Go struct field ConfigMap.data of type string\n\n","status":"failed"},"config":{"global":{"azureEnvironment":"AZUREPUBLICCLOUD","kubernetesDistro":"kind","kubernetesInfra":"generic","location":"eastus2euap","onboardingPrivateKey":"-----BEGIN RSA PRIVATE KEY-----\n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\n-----END RSA PRIVATE KEY-----","resourceGroupName":1234,"resourceName":"testcli3","subscriptionId":"86126c5a-d4b5-464e-b177-5c848e7ce78c","tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47"},"systemDefaultValues":{"azureArcAgents":{"autoUpdate":true},"clusterconnect-agent":{"enabled":true},"customLocations":{"enabled":true,"oid":"51dfe1e8-70c6-4de5-a08e-e18aff23d815"},"spnOnboarding":false}},"manifest":"---\n# Source: azure-arc-k8sagents/templates/namespace.yaml\napiVersion: v1\nkind: Namespace\nmetadata:\n  name: azure-arc\n  labels:\n    control-plane: \"true\"\n    admission.policy.azure.com/ignore: \"true\"\n---\n# Source: azure-arc-k8sagents/templates/azure-arc-kube-aad-proxy-networkpolicies.yaml\napiVersion: networking.k8s.io/v1\nkind: NetworkPolicy\nmetadata:\n  name: kube-aad-proxy-network-policy\n  namespace: azure-arc\n  labels:\n    app.kubernetes.io/managed-by: \"Helm\"\n    app.kubernetes.io/instance: \"azure-arc\"\n    app.kubernetes.io/version: \"1.0\"\n    helm.sh/chart: \"azure-arc-k8sagents-1.21.10\"\n    app.kubernetes.io/name: azure-arc-k8s\n    app.kubernetes.io/component: kube-aad-proxy\nspec:\n  podSelector:\n    matchLabels:\n      app.kubernetes.io/name: azure-arc-k8s\n      app.kubernetes.io/component: kube-aad-proxy\n  policyTypes:\n  - Ingress\n  ingress:\n  - from:\n  # Allow traffic only from clusterconnect-agent and metrics-agent pod in azure-arc ns\n    - namespaceSelector:\n        matchLabels:\n          name: azure-arc\n    - podSelector:\n         matchLabels:\n           app.kubernetes.io/name: azure-arc-k8s\n           app.kubernetes.io/component: clusterconnect-agent\n    - podSelector:\n         matchLabels:\n           app.kubernetes.io/name: azure-arc-k8s\n           app.kubernetes.io/component: metrics-agent\n---\n# Source: azure-arc-k8sagents/templates/azure-agent-clusterrolebinding.yaml\napiVersion: v1\nkind: ServiceAccount\nmetadata:\n  name: azure-arc-operatorsa\n  namespace: azure-arc\n---\n# Source: azure-arc-k8sagents/templates/azure-arc-kube-aad-proxy-roles.yaml\napiVersion: v1\nkind: ServiceAccount\nmetadata:\n  name: azure-arc-kube-aad-proxy-sa\n  namespace: azure-arc\n---\n# Source: azure-arc-k8sagents/templates/secrets.yaml\napiVersion: v1\nkind: Secret\nmetadata:\n  name: azure-arc-connect-privatekey\n  namespace: azure-arc\ntype: Opaque\nstringData: \n   privateKey: \"-----BEGIN RSA PRIVATE KEY-----\\n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\\n-----END RSA PRIVATE KEY-----\"\n---\n# Source: azure-arc-k8sagents/templates/azure-config.yaml\napiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: azure-clusterconfig\n  namespace: azure-arc\ndata:\n  AZURE_RESOURCE_NAME: testcli3\n  AZURE_SUBSCRIPTION_ID: 86126c5a-d4b5-464e-b177-5c848e7ce78c\n  AZURE_TENANT_ID: 72f988bf-86f1-41af-91ab-2d7cd011db47\n  IS_CLIENT_SECRET_A_TOKEN: \"false\"\n  MAX_STORES: \"30\"\n  MAX_ENTRIES_PER_STORE: \"680\"\n  AZURE_RESOURCE_GROUP: 1234\n  AZURE_REGION: eastus2euap\n  ONBOARDING_SECRET_NAME: \"azure-arc-connect-privatekey\"\n  ONBOARDING_SECRET_NAMESPACE: \"azure-arc\"\n  TAGS: map[]\n  MANAGED_IDENTITY_AUTH: \"true\"\n  RP_NAMESPACE: Microsoft.Kubernetes\n  CLUSTER_TYPE: ConnectedClusters\n  FLUX_CLIENT_DEFAULT_LOCATION: mcr.microsoft.com/azurearck8s/arc-preview/fluxctl:0.2.0\n  AZURE_ARC_AGENT_VERSION: 1.21.10\n  HELM_AUTO_UPDATE_CHECK_FREQUENCY_IN_MINUTES: \"60\"\n  AZURE_ARC_AUTOUPDATE: \"true\"\n  ARC_AGENT_RELEASE_TRAIN: stable\n  RESOURCE_SYNC_LIST_CHUNK_SIZE: \"200\"\n  IS_LEAST_PRIVILEGES_MODE: \"false\" \n  PLATFORM_SERVICE_ACCOUNT_NAME: \"\"\n  EXTENSION_CATALOG_DOWNLOAD_PATH: \"https://mcr.microsoft.com/azurearck8s/extension-catalog\"\n  EXTENSION_CATALOG_DOWNLOAD_VERSION: \"public\"\n  EXTENSION_CATALOG_CACHE_TTL_IN_MINUTES: \"14400\"\n  PACKAGE_SOURCE_VALIDATION_ENABLED: \"true\"\n  IS_MARKETPLACE_STAGING_ENVIRONMENT: \"false\"\n  IS_PACKAGE_SOURCE_VALIDATION_AUDIT_ONLY: \"true\"\n  FORCE_UPDATE_MSI_ADAPTER: \"false\"\n  ENABLE_MSAL: \"true\"\n  \n  IS_SNI_ENABLED: \"true\"\n  \n  ARC_AGENT_HELM_CHART_NAME: \"azure-arc-k8sagents\"\n  \n  AZURE_ARC_RELEASE_NAME: \"azure-arc\"\n  AZURE_ARC_HELM_NAMESPACE: \"azure-arc-release\"\n  DEBUG_LOGGING: \"false\"\n  NO_AUTH_HEADER_DATA_PLANE: \"false\"\n  K8S_EVENT_LOGGING_ENABLED: \"true\"\n  EXTENSION_OPERATOR_ENABLED: \"true\"\n  GITOPS_ENABLED: \"true\"\n  FLUX_UPSTREAM_SERVICE_ENABLED: \"true\"\n  \n  ENABLE_EXTENSION_EVENT_COLLECTION_SERVICE: \"true\"\n  ENABLE_EXTENSION_EVENT_COLLECTION_DATAPLANE: \"false\"\n  \n  EVENTS_URL: \"http://extension-events-collector:8082\"\n  EVENTS_URL_CROSS_NAMESPACE: \"http://extension-events-collector.azure-arc.svc.cluster.local:8082\"\n  AZURE_ENVIRONMENT: \"AZUREPUBLICCLOUD\"\n  KUBERNETES_DISTRO: \"kind\"\n  MSI_ADAPTER_ARTIFACT_PATH: \"mcr.microsoft.com/azurearck8s/msi-adapter:1.0.11\"\n  KUBERNETES_INFRA: \"generic\"\n  CLUSTER_CONNECT_AGENT_ENABLED: \"true\"\n  RESOURCE_SYNC_ENABLE_CHUNKED_SYNC: \"true\"\n  CUSTOM_IDENTITY_PROVIDER_ENABLED: \"false\"\n  AZURE_RESOURCE_MANAGER_ENDPOINT: \"\"\n  ACTIVE_DIRECTORY_ENDPOINT: \"\"\n  GUARD_PKI_HOSTPATH: \"\"\n  ENABLE_OIDC_ISSUER: \"false\"\n\n  HTTP_USE_CUSTOM_DIALER: \"false\"\n  HTTP_CUSTOM_DIALER_CHECK_HOST: microsoft.com\n  HTTP_CUSTOM_DIALER_TIMEOUT: \"30s\"\n  HTTP_CUSTOM_DIALER_CHECK_INTERVAL: \"5m\"\n  HTTP_CUSTOM_DIALER_DNS_ADDRESS: 1.1.1.1:53\n\n  GOFIPS: \"0\"\n\n  ARC_PROXY_BIND_PORT: \"7832\"\n  ARC_PROXY_GATEWAY: gw.arc.azure.com\n---\n# Source: azure-arc-k8sagents/templates/azure-fluentbit-collector-config.yaml\napiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: azure-fluentbit-collector-config\n  namespace: azure-arc\ndata:\n  fluent-bit.conf: |\n    [SERVICE]\n        Flush         120\n        Log_Level     info\n        Daemon        off\n        Parsers_File  parsers.conf\n        HTTP_Server   Off\n\n    @INCLUDE input.conf\n    @INCLUDE filter.conf\n    @INCLUDE output.conf\n\n  input.conf: |\n    [INPUT]\n        Name              forward\n        Listen            0.0.0.0\n        Port              24224\n        Buffer_Max_Size   1MB\n        Buffer_Chunk_Size 100KB\n\n    [INPUT]\n        Name              tail\n        Tag               azure-arc.logcollector.*\n        Path              /var/log/con*/${POD_NAME}*azure-arc*.log\n        Multiline         On\n        Parser_Firstline  first_line\n        Mem_Buf_Limit     100KB\n        Buffer_Chunk_Size 1KB\n\n  filter.conf: |\n    [FILTER]\n        Name lua\n        Match azure-arc.logcollector.*\n        script /fluent-bit/bin/helpers.lua\n        call process\n\n    [FILTER]\n        Name record_modifier\n        Match azure-arc.logcollector.*\n        Record AgentNameOverride ${AGENT_NAME}\n\n  parsers.conf: |\n    [PARSER]\n        Name        first_line\n        Format      regex\n        Regex       ^{\"log\":\"(?!\\\\u0009)(?\u003clog\u003e\\bpanic([^,\"]|\\n)*)\"\n\n  output.conf: |\n    [OUTPUT]\n        Name        http_mdm\n        Match       *\n        Id          http_mdm_plugin\n---\n# Source: azure-arc-k8sagents/templates/azure-fluentbit-config.yaml\napiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: azure-fluentbit-config\n  namespace: azure-arc\ndata:\n  fluent-bit.conf: |\n    [SERVICE]\n        Flush         30\n        Log_Level     info\n        Daemon        off\n        Parsers_File  parsers.conf\n        HTTP_Server   Off\n\n    @INCLUDE input-kubernetes.conf\n    @INCLUDE filter.conf\n    @INCLUDE output.conf\n\n  input-kubernetes.conf: |\n    [INPUT]\n        Name              tail\n        Tag               azure-arc.${AGENT_NAME}.*\n        Path              /var/log/con*/${POD_NAME}*azure-arc*.log\n        Exclude_Path      /var/log/con*/${POD_NAME}*azure-arc_fluent-bit*.log\n        Multiline         On\n        Parser_Firstline  first_line\n        Mem_Buf_Limit     100KB\n        Buffer_Chunk_Size 1KB\n\n    [INPUT]\n        Name              tail\n        Tag               azure-arc.fluent-bit.*\n        Path              /var/log/con*/${POD_NAME}*azure-arc_fluent-bit*.log\n        Multiline         On\n        Parser_Firstline  first_line\n        Mem_Buf_Limit     100KB\n        Buffer_Chunk_Size 1KB\n\n  filter.conf: |\n    [FILTER]\n        Name lua\n        Match azure-arc.*\n        script /fluent-bit/bin/helpers.lua\n        call process\n\n    [FILTER]\n        Name record_modifier\n        Match azure-arc.${AGENT_NAME}.*\n        Record AgentNameOverride ${AGENT_NAME}\n\n    [FILTER]\n        Name record_modifier\n        Match azure-arc.fluent-bit.*\n        Record AgentNameOverride ${AGENT_NAME}-Fluentbit\n\n  parsers.conf: |\n    [PARSER]\n        Name        first_line\n        Format      regex\n        Regex       ^{\"log\":\"(?!\\\\u0009)(?\u003clog\u003e\\bpanic([^,\"]|\\n)*)\"\n\n  output.conf: |\n    [OUTPUT]\n        Name        forward\n        Match       azure-arc.*\n        Host        logcollector\n        Port        24224\n---\n# Source: azure-arc-k8sagents/templates/azure-telegraf-config.yaml\napiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: azure-telegraf-config\n  namespace: azure-arc\ndata:\n  telegraf.conf: |\n    [agent]\n      interval = \"300s\"\n      flush_interval = \"45s\"\n      metric_batch_size = 250\n      metric_buffer_limit = 1000\n    \n    [[inputs.prometheus]]\n    \n      kubernetes_services = [\"http://extension-manager-svc.azure-arc:8081/metrics\"]\n    \n      monitor_kubernetes_pods = true\n      kubernetes_label_selector = \"app.kubernetes.io/name=azure-arc-k8s\"\n      monitor_kubernetes_pods_namespace = \"azure-arc\"\n      bearer_token = \"/var/run/secrets/kubernetes.io/serviceaccount/token\"\n      tls_ca = \"/var/run/secrets/kubernetes.io/serviceaccount/ca.crt\"\n      insecure_skip_verify = true\n      response_timeout = \"15s\"\n    \n      namedrop = [\"rest_client_requests_*\", \"rest_client_request_*\", \"go_memstats_gc_*\", \"go_memstats_stack_*\", \"go_threads*\", \"go_memstats_mcache_*_bytes\", \"go_memstats_mspan_*_bytes\", \"go_memstats_last*\", \"go_memstats_next*\", \"go_memstats_other*\", \"go_memstats_sys*\", \"go_memstats_heap_idle_bytes\", \"go_memstats_heap_inuse_bytes\", \"go_memstats_heap_objects\", \"go_memstats_heap_released_bytes\", \"go_memstats_heap_sys_bytes\", \"process_*_fds\", \"process_threads_*\", \"process_*_pagefault_*\", \"process_disk_*\", \"process_*_context_switches_*\", \"process_num*\", \"process_open*\", \"process_resident*\", \"process_working*\", \"dotnet_collection_count_total*\", \"dotnet_total_memory_bytes\", \"go_gc_duration_seconds\", \"go_goroutines\", \"go_info\", \"internal_*\", \"workqueue_*\", \"kubernetes_node\", \"version_*\", \"process_virtual_memory_max_bytes\", \"go_gc_pauses_seconds_total\", \"go_sched_latencies_seconds\", \"go_gc_gomemlimit_bytes\"]\n    \n    \n    [[inputs.prometheus]]\n      monitor_kubernetes_pods = true\n      kubernetes_label_selector = \"app.kubernetes.io/component=osm-controller\"\n      monitor_kubernetes_pods_namespace = \"arc-osm-system\"\n      bearer_token = \"/var/run/secrets/kubernetes.io/serviceaccount/token\"\n      tls_ca = \"/var/run/secrets/kubernetes.io/serviceaccount/ca.crt\"\n      insecure_skip_verify = true\n      namedrop = [\"rest_client_requests_*\", \"rest_client_request_*\", \"go_memstats_gc_*\", \"go_memstats_stack_*\", \"go_threads*\", \"go_memstats_mcache_*_bytes\", \"go_memstats_mspan_*_bytes\", \"go_memstats_last*\", \"go_memstats_next*\", \"go_memstats_other*\", \"go_memstats_sys*\", \"go_memstats_heap_idle_bytes\", \"go_memstats_heap_inuse_bytes\", \"go_memstats_heap_objects\", \"go_memstats_heap_released_bytes\", \"go_memstats_heap_sys_bytes\", \"process_*_fds\", \"process_threads_*\", \"process_*_pagefault_*\", \"process_disk_*\", \"process_*_context_switches_*\", \"process_num*\", \"process_open*\", \"process_resident*\", \"process_working*\", \"dotnet_collection_count_total*\", \"dotnet_total_memory_bytes\", \"go_gc_duration_seconds\", \"go_goroutines\", \"go_info\", \"internal_*\", \"workqueue_*\", \"kubernetes_node\", \"version_*\", \"process_virtual_memory_max_bytes\", \"go_gc_pauses_seconds_total\", \"go_sched_latencies_seconds\"]\n    \n    [[inputs.internal]]\n      collect_memstats = true\n      [inputs.internal.tags]\n        service = \"metrics\"\n    \n    \n    [[inputs.kube_inventory]]\n      url = \"https://kubernetes.default.svc\"\n      namespace = \"\"\n      bearer_token = \"/var/run/secrets/kubernetes.io/serviceaccount/token\"\n      tls_ca = \"/var/run/secrets/kubernetes.io/serviceaccount/ca.crt\"\n      response_timeout = \"5s\"\n      resource_include = [ \"nodes\" ]\n    \n    \n    \n    [[aggregators.basicstats]]\n      period = \"300s\"\n      grace = \"10s\"\n      drop_original = true\n      stats = [\"non_negative_diff\"]\n      namepass = [\"gitconfig_install\", \"gitconfig_retry\", \"gitconfig_delete\", \"gitconfig_heartbeat\", \"flux_*\", \"helm_*\", \"extension_*\"]\n    \n    \n    \n    \n    \n    [[outputs.http_mdm]]\n      url = \"https://$AZURE_REGION.dp.kubernetesconfiguration.azure.$DP_SUFFIX/subscriptions/$AZURE_SUBSCRIPTION_ID/resourceGroups/$AZURE_RESOURCE_GROUP/provider/$RP_NAMESPACE-$CLUSTER_TYPE/clusters/$AZURE_RESOURCE_NAME/agentDiagnostics/postMetrics?api-version=2019-11-01-Preview\"\n    \n    \n      token_url = \"$AZURE_SUBSCRIPTION_ID/$AZURE_RESOURCE_GROUP/$CLUSTER_TYPE/$AZURE_RESOURCE_NAME\"\n      data_format = \"mdm\"\n      dimension_filter = \"MdmDimension_(.*)\"\n      timeout = \"60s\"\n      metric_batch_size = 250\n      metric_buffer_limit = 500\n    \n      [outputs.http_mdm.headers]\n        Content-Type = \"application/json; charset=utf-8\"\n---\n# Source: azure-arc-k8sagents/templates/arc.azure.com_connectedclusters.yaml\napiVersion: apiextensions.k8s.io/v1\nkind: CustomResourceDefinition\nmetadata:\n  name: connectedclusters.arc.azure.com\n  labels:\n    azuresync: \"true\"\n  annotations:\n    resourceSync.arc.azure.com/ProviderNamespace: Microsoft.Kubernetes\n    resourceSync.arc.azure.com/ResourceType: ConnectedClusters\n  creationTimestamp: null\nspec:\n  group: arc.azure.com\n  preserveUnknownFields: false\n  names:\n    kind: ConnectedCluster\n    plural: connectedclusters\n  scope: Namespaced\n  versions:\n  - name: v1beta1\n    schema:\n      openAPIV3Schema:\n        description: ConnectedCluster is the object for the ConnectedClusters\n          API\n        properties:\n          apiVersion:\n            description: 'APIVersion defines the versioned schema of this representation\n              of an object. Servers should convert recognized schemas to the latest\n              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'\n            type: string\n          kind:\n            description: 'Kind is a string value representing the REST resource this\n              object represents. Servers may infer this from the endpoint the client\n              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'\n            type: string\n          metadata:\n            type: object\n          spec:\n            description: ConnectedClusterSpec defines the desired state of\n              ConnectedCluster\n            properties:\n              azureResourceId:\n                description: AzureResourceId is the armId of the cluster\n                type: string\n            type: object\n          status:\n            description: ConnectedClusterStatus defines the observed state\n              of ConnectedCluster\n            properties:\n              nodeCount:\n                description: NodeCount is the no of the nodes present in the cluster \n                type: integer\n              kubernetesAPIServerVersion:\n                description: KubernetesAPIServerVersion is the kubernetes version the cluster is running on\n                type: string\n              kubernetesDistribution:\n                description: This is the Kubernetes distribution of the Kubernetes cluster onboarded to Azure arc\n                type: string\n              kubernetesInfrastructure:\n                description: This is the Kubernetes Infrastructure of the Kubernetes cluster onboarded to Azure arc\n                type: string              \r\n              arcAgentVersion:\r\n                description: ArcAgentVersion is the version of the arc agents in the cluster\r\n                type: string\r\n              coreCount:\r\n                description: CoreCount is the collective no of cores limit over all nodes present in the cluster\r\n                type: integer\r\n              managedIdentityCertificateExpirationTime:\r\n                format: date-time\r\n                type: string\r\n              lastConnectivityTime:\r\n                format: date-time\r\n                type: string\n            type: object\n        type: object\n    served: true\n    storage: true\n    subresources:\n      status: {}\nstatus:\n  acceptedNames:\n    kind: \"\"\n    plural: \"\"\n  conditions: []\n  storedVersions: []\n---\n# Source: azure-arc-k8sagents/templates/clusterconfig.azure.com_arccertificates.yaml\napiVersion: apiextensions.k8s.io/v1\nkind: CustomResourceDefinition\nmetadata:\n  annotations:\n    controller-gen.kubebuilder.io/version: v0.4.1\n  creationTimestamp: null\n  name: arccertificates.clusterconfig.azure.com\nspec:\n  group: clusterconfig.azure.com\n  names:\n    kind: ArcCertificate\n    listKind: ArcCertificateList\n    plural: arccertificates\n    singular: arccertificate\n  scope: Namespaced\n  versions:\n  - name: v1beta1\n    schema:\n      openAPIV3Schema:\n        description: ArcCertificate is the Schema for the arccertificates\n          API\n        properties:\n          apiVersion:\n            description: 'APIVersion defines the versioned schema of this representation\n              of an object. Servers should convert recognized schemas to the latest\n              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'\n            type: string\n          kind:\n            description: 'Kind is a string value representing the REST resource this\n              object represents. Servers may infer this from the endpoint the client\n              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'\n            type: string\n          metadata:\n            type: object\n          spec:\n            description: ArcCertificateSpec defines the desired state of\n              ArcCertificate\n            properties:\n              issuer:\n                type: string\n              serviceName:\n                description: Foo is an example field of ArcCertificate.\n                  Edit arccertificate_types.go to remove/update\n                type: string\n            type: object\n          status:\n            description: ArcCertificateStatus defines the observed state\n              of ArcCertificate\n            properties:\n              errorMessage:\n                type: string\n              lastSyncTime:\n                description: 'INSERT ADDITIONAL STATUS FIELD - define observed state\n                  of cluster Important: Run \"make\" to regenerate code after modifying\n                  this file'\n                type: string\n              expirationTime:\n                type: string\n              secretName:\n                type: string\n            type: object\n        type: object\n    served: true\n    storage: true\n    subresources:\n      status: {}\nstatus:\n  acceptedNames:\n    kind: \"\"\n    plural: \"\"\n  conditions: []\n  storedVersions: []\n---\n# Source: azure-arc-k8sagents/templates/clusterconfig.azure.com_azureclusteridentityrequests.yaml\napiVersion: apiextensions.k8s.io/v1\nkind: CustomResourceDefinition\nmetadata:  \n  labels:\n    app.kubernetes.io/managed-by: Helm\n  annotations:\n    controller-gen.kubebuilder.io/version: v0.4.1\n    meta.helm.sh/release-name: azure-arc\n    meta.helm.sh/release-namespace: azure-arc-release\n  creationTimestamp: null\n  name: azureclusteridentityrequests.clusterconfig.azure.com\nspec:\n  group: clusterconfig.azure.com\n  preserveUnknownFields: false\n  names:\n    shortNames:\n      - azidentityreq\n    kind: AzureClusterIdentityRequest\n    listKind: AzureClusterIdentityRequestList\n    plural: azureclusteridentityrequests\n    singular: azureclusteridentityrequest\n  scope: Namespaced\n  versions:\n  - name: v1beta1\n    schema:\n      openAPIV3Schema:\n        description: AzureClusterIdentityRequest is the Schema for the azureclusteridentityrequests\n          API\n        properties:\n          apiVersion:\n            description: 'APIVersion defines the versioned schema of this representation\n              of an object. Servers should convert recognized schemas to the latest\n              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'\n            type: string\n          kind:\n            description: 'Kind is a string value representing the REST resource this\n              object represents. Servers may infer this from the endpoint the client\n              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'\n            type: string\n          metadata:\n            type: object\n          spec:\n            description: AzureClusterIdentityRequestSpec defines the desired state\n              of an AzureClusterIdentityRequest\n            properties:\n              apiVersion:\n                type: string\n              audience:\n                type: string\n              caller:\n                type: string\n              resourceId:\n                type: string\n            type: object\n          status:\n            description: AzureClusterIdentityRequestStatus defines the observed state\n              of AzureClusterIdentityRequest\n            properties:\n              expirationTime:\n                type: string\n              tokenReference:\n                description: 'INSERT ADDITIONAL STATUS FIELD - define observed state\n                  of cluster Important: Run \"make\" to regenerate code after modifying\n                  this file'\n                properties:\n                  dataName:\n                    type: string\n                  secretName:\n                    type: string\n                type: object\n            type: object\n        type: object\n    served: true\n    storage: true\n    subresources:\n      status: {}\nstatus:\n  acceptedNames:\n    kind: \"\"\n    plural: \"\"\n  conditions: []\n  storedVersions: []\n---\n# Source: azure-arc-k8sagents/templates/clusterconfig.azure.com_azureextensionidentities.yaml\napiVersion: apiextensions.k8s.io/v1\nkind: CustomResourceDefinition\nmetadata:\n  labels:\n    app.kubernetes.io/managed-by: Helm\n  annotations:\n    controller-gen.kubebuilder.io/version: v0.4.1\n    meta.helm.sh/release-name: azure-arc\n    meta.helm.sh/release-namespace: azure-arc-release\n  creationTimestamp: null\n  name: azureextensionidentities.clusterconfig.azure.com\nspec:\n  group: clusterconfig.azure.com\n  preserveUnknownFields: false\n  names:\n    kind: AzureExtensionIdentity\n    listKind: AzureExtensionIdentityList\n    plural: azureextensionidentities\n    singular: azureextensionidentity\n  scope: Namespaced\n  versions:\n  - name: v1beta1\n    schema:\n      openAPIV3Schema:\n        description: AzureExtensionIdentity is the Schema for the azureextensionidentities\n          API\n        properties:\n          apiVersion:\n            description: 'APIVersion defines the versioned schema of this representation\n              of an object. Servers should convert recognized schemas to the latest\n              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'\n            type: string\n          kind:\n            description: 'Kind is a string value representing the REST resource this\n              object represents. Servers may infer this from the endpoint the client\n              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'\n            type: string\n          metadata:\n            type: object\n          spec:\n            description: AzureExtensionIdentitySpec defines the desired state of AzureExtensionIdentity\n            properties:\n              allowedAudiences:\n                items:\n                  type: string\n                type: array\n              serviceAccounts:\n                items:\n                  properties:\n                    name:\n                      type: string\n                    namespace:\n                      type: string\n                  type: object\n                type: array\n              tokenNamespace:\n                type: string\n            type: object\n          status:\n            description: AzureExtensionIdentityStatus defines the observed state of\n              AzureExtensionIdentity\n            type: object\n        type: object\n    served: true\n    storage: true\n    subresources:\n      status: {}\nstatus:\n  acceptedNames:\n    kind: \"\"\n    plural: \"\"\n  conditions: []\n  storedVersions: []\n---\n# Source: azure-arc-k8sagents/templates/clusterconfig.azure.com_configsyncstatuses.yaml\napiVersion: apiextensions.k8s.io/v1\nkind: CustomResourceDefinition\nmetadata:\n  labels:\n    app.kubernetes.io/managed-by: Helm\n  annotations:\n    controller-gen.kubebuilder.io/version: v0.9.2\n    meta.helm.sh/release-name: azure-arc\n    meta.helm.sh/release-namespace: azure-arc-release\n  creationTimestamp: null\n  name: configsyncstatuses.clusterconfig.azure.com\nspec:\n  group: clusterconfig.azure.com\n  names:\n    kind: ConfigSyncStatus\n    listKind: ConfigSyncStatusList\n    plural: configsyncstatuses\n    singular: configsyncstatus\n  scope: Namespaced\n  versions:\n  - name: v1beta1\n    schema:\n      openAPIV3Schema:\n        description: ConfigSyncStatus is the Schema for the configsyncstatuses API\n        properties:\n          apiVersion:\n            description: 'APIVersion defines the versioned schema of this representation\n              of an object. Servers should convert recognized schemas to the latest\n              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'\n            type: string\n          kind:\n            description: 'Kind is a string value representing the REST resource this\n              object represents. Servers may infer this from the endpoint the client\n              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'\n            type: string\n          metadata:\n            type: object\n          spec:\n            description: ConfigSyncStatusSpec defines the desired state of ConfigSyncStatus\n            properties:\n              configApplyTime:\n                format: date-time\n                type: string\n              configKind:\n                type: string\n              resourceVersionSynced:\n                type: string\n              agentOperationID:\n                type: string\n              syncTime:\n                format: date-time\n                type: string\n            type: object\n          status:\n            description: ConfigSyncStatusStatus defines the observed state of ConfigSyncStatus\n            type: object\n        type: object\n    served: true\n    storage: true\n    subresources:\n      status: {}\n---\n# Source: azure-arc-k8sagents/templates/clusterconfig.azure.com_customlocationsettings.yaml\napiVersion: apiextensions.k8s.io/v1\nkind: CustomResourceDefinition\nmetadata:\n  labels:\n    app.kubernetes.io/managed-by: Helm\n  annotations:\n    controller-gen.kubebuilder.io/version: v0.2.4\n    meta.helm.sh/release-name: azure-arc\n    meta.helm.sh/release-namespace: azure-arc-release\n  creationTimestamp: null\n  name: customlocationsettings.clusterconfig.azure.com\nspec:\n  group: clusterconfig.azure.com\n  preserveUnknownFields: false\n  names:\n    kind: CustomLocationSettings\n    listKind: CustomLocationSettingsList\n    plural: customlocationsettings\n    singular: customlocationsettings\n  scope: Namespaced\n  versions:\n  - name: v1beta1\n    schema:\n      openAPIV3Schema:\n        description: CustomLocationSettings is the Schema for the customlocationsettings\n          API\n        properties:\n          apiVersion:\n            description: 'APIVersion defines the versioned schema of this representation\n              of an object. Servers should convert recognized schemas to the latest\n              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'\n            type: string\n          kind:\n            description: 'Kind is a string value representing the REST resource this\n              object represents. Servers may infer this from the endpoint the client\n              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'\n            type: string\n          metadata:\n            type: object\n          spec:\n            description: CustomLocationSettingsSpec defines the desired state of CustomLocationSettings\n            properties:\n              ClusterRole:\n                type: string\n              EnabledResourceTypes:\n                items:\n                  properties:\n                    ApiVersion:\n                      type: string\n                    ResourceMapping:\n                      properties:\n                        Group:\n                          type: string\n                        Kind:\n                          type: string\n                        Name:\n                          type: string\n                        Version:\n                          type: string\n                      type: object\n                    ResourceProviderNamespace:\n                      type: string\n                    ResourceType:\n                      type: string\n                  type: object\n                type: array\n              RPAppId:\n                description: Foo is an example field of CustomLocationSettings. Edit\n                  CustomLocationSettings_types.go to remove/update\n                type: string\n              ExtensionRegistrationTime:\n                type: integer\n              ExtensionType:\n                type: string\n              AnnotationSyncFilter:\n                items:\n                  type: string\n                type: array\n              LabelSyncFilter:\n                items:\n                  type: string\n                type: array\n            type: object\n          status:\n            description: CustomLocationSettingsStatus defines the observed state of\n              CustomLocationSettings\n            type: object\n        type: object\n    served: true\n    storage: true\n    subresources:\n      status: {}\nstatus:\n  acceptedNames:\n    kind: \"\"\n    plural: \"\"\n  conditions: []\n  storedVersions: []\n---\n# Source: azure-arc-k8sagents/templates/clusterconfig.azure.com_extensionconfigs.yaml\napiVersion: apiextensions.k8s.io/v1\r\nkind: CustomResourceDefinition\r\nmetadata:\r\n  annotations:\r\n    controller-gen.kubebuilder.io/version: v0.4.1\r\n    meta.helm.sh/release-name: azure-arc\r\n    meta.helm.sh/release-namespace: azure-arc-release\r\n  creationTimestamp: null\r\n  labels:\r\n    app.kubernetes.io/managed-by: Helm\r\n  name: extensionconfigs.clusterconfig.azure.com\r\nspec:\r\n  group: clusterconfig.azure.com\r\n  names:\r\n    kind: ExtensionConfig\r\n    listKind: ExtensionConfigList\r\n    plural: extensionconfigs\r\n    shortNames:\r\n    - ec\r\n    singular: extensionconfig\r\n  preserveUnknownFields: false\r\n  scope: Namespaced\r\n  versions:\r\n  - additionalPrinterColumns:\r\n    - description: Extension Type\r\n      jsonPath: .spec.extensionType\r\n      name: Type\r\n      type: string\r\n    - description: Extension Version\r\n      jsonPath: .spec.version\r\n      name: Version\r\n      type: string\r\n    - description: Extension Creation Time\r\n      jsonPath: .metadata.creationTimestamp\r\n      name: Age\r\n      type: date\r\n    name: v1beta1\r\n    schema:\r\n      openAPIV3Schema:\r\n        description: ExtensionConfig is the Schema for the extensionconfigs API\r\n        properties:\r\n          apiVersion:\r\n            description: 'APIVersion defines the versioned schema of this representation\r\n              of an object. Servers should convert recognized schemas to the latest\r\n              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'\r\n            type: string\r\n          kind:\r\n            description: 'Kind is a string value representing the REST resource this\r\n              object represents. Servers may infer this from the endpoint the client\r\n              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'\r\n            type: string\r\n          metadata:\r\n            type: object\r\n          spec:\r\n            description: ExtensionConfigSpec defines the desired state of ExtensionConfig\r\n            properties:\r\n              autoUpgradeMinorVersion:\r\n                type: boolean\r\n              correlationId:\r\n                type: string\r\n              customResourceTemplates:\r\n                items:\r\n                  type: string\r\n                type: array\r\n              eventOperationId:\r\n                type: string\r\n              extensionRegistrationTime:\r\n                format: int64\r\n                type: integer\r\n              extensionType:\r\n                type: string\r\n              lastModifiedTime:\r\n                format: date-time\r\n                type: string\r\n              operationId:\r\n                type: string\r\n              operationTriggerType:\r\n                type: string\r\n              parameter:\r\n                additionalProperties:\r\n                  type: string\r\n                type: object\r\n              protectedParameters:\r\n                properties:\r\n                  referenceName:\r\n                    type: string\r\n                  version:\r\n                    type: string\r\n                type: object\r\n              reconcilerIntervalInSeconds:\r\n                type: integer\r\n              releaseTrain:\r\n                type: string\r\n              repoUrl:\r\n                type: string\r\n              softDelete:\r\n                type: boolean\r\n              version:\r\n                type: string\r\n            type: object\r\n          status:\r\n            description: ExtensionConfigStatus defines the observed state of ExtensionConfig\r\n            properties:\r\n              configAppliedTime:\r\n                description: 'INSERT ADDITIONAL STATUS FIELD - define observed state\r\n                  of cluster Important: Run \"make\" to regenerate code after modifying\r\n                  this file'\r\n                type: string\r\n              helmReleaseStatus:\r\n                properties:\r\n                  lastReleaseStatus:\r\n                    type: string\r\n                  lastReleaseUpdatedTime:\r\n                    type: string\r\n                  lastReleaseVersion:\r\n                    type: string\r\n                  operationTriggerType:\r\n                    type: string\r\n                type: object                \r\n              lastSuccessfulReconciledTime:\r\n                type: string\r\n              message:\r\n                type: string\r\n              observedEventOperationId:\r\n                type: string\r\n              observedGeneration:\r\n                format: int64\r\n                type: integer\r\n              observedOperationId:\r\n                type: string\r\n              operatorPropertiesHashed:\r\n                type: string\r\n              reconciliationError:\r\n                type: string\r\n              status:\r\n                type: string\r\n              syncStatus:\r\n                properties:\r\n                  isSyncedWithAzure:\r\n                    type: boolean\r\n                  lastSyncTime:\r\n                    type: string\r\n                type: object\r\n            type: object\r\n        type: object\r\n    served: true\r\n    storage: true\r\n    subresources:\r\n      status: {}\r\nstatus:\r\n  acceptedNames:\r\n    kind: \"\"\r\n    plural: \"\"\r\n  conditions: []\r\n  storedVersions: []\n---\n# Source: azure-arc-k8sagents/templates/clusterconfig.azure.com_extensionevents.yaml\napiVersion: apiextensions.k8s.io/v1\nkind: CustomResourceDefinition\nmetadata:\n  labels:\n    app.kubernetes.io/managed-by: Helm\n  annotations:\n    controller-gen.kubebuilder.io/version: v0.9.2\n    meta.helm.sh/release-name: azure-arc\n    meta.helm.sh/release-namespace: azure-arc-release\n  creationTimestamp: null\n  name: extensionevents.clusterconfig.azure.com\nspec:\n  group: clusterconfig.azure.com\n  names:\n    kind: ExtensionEvents\n    listKind: ExtensionEventsList\n    plural: extensionevents\n    singular: extensionevents\n  scope: Namespaced\n  versions:\n  - name: v1beta1\n    schema:\n      openAPIV3Schema:\n        description: ExtensionEvents is the Schema for the extensionevents API\n        properties:\n          apiVersion:\n            description: 'APIVersion defines the versioned schema of this representation\n              of an object. Servers should convert recognized schemas to the latest\n              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'\n            type: string\n          kind:\n            description: 'Kind is a string value representing the REST resource this\n              object represents. Servers may infer this from the endpoint the client\n              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'\n            type: string\n          metadata:\n            type: object\n          spec:\n            description: ExtensionEventsSpec defines the desired state of ExtensionEvents\n            properties:\n              endTime:\n                format: date-time\n                type: string\n              extensionEvents:\n                items:\n                  properties:\n                    eventTime:\n                      format: date-time\n                      type: string\n                    logType:\n                      type: string\n                    source:\n                      type: string\n                    message:\n                      type: string\n                    troubleshootLink:\n                      type: string\n                    innerError:\n                      type: string\n                  required:\n                  - logType\n                  - message\n                  type: object\n                type: array\n              extensionName:\n                type: string\n              operationId:\n                type: string\n              armOperationId:\n                type: string\n              operationName:\n                type: string\n              operationStatus:\n                type: string\n              extensionType:\n                type: string\n              extensionVersion:\n                type: string\n              startTime:\n                format: date-time\n                type: string\n              timeoutTime:\n                format: date-time\n                type: string\n            type: object\n          status:\n            description: ExtensionEventsStatus defines the observed state of ExtensionEvents\n            properties:\n              observedGeneration:\n                format: int64\n                type: integer\n              retryCount:\n                format: int64\n                type: integer\n              syncTime:\n                format: date-time\n                type: string\n            type: object\n        type: object\n    served: true\n    storage: true\n    subresources:\n      status: {}\n---\n# Source: azure-arc-k8sagents/templates/clusterconfig.azure.com_gitconfigs.yaml\napiVersion: apiextensions.k8s.io/v1\nkind: CustomResourceDefinition\nmetadata:\n  labels:\n    app.kubernetes.io/managed-by: Helm\n  annotations:\n    meta.helm.sh/release-name: azure-arc\n    meta.helm.sh/release-namespace: azure-arc-release\n  creationTimestamp: null\n  name: gitconfigs.clusterconfig.azure.com\nspec:\n  group: clusterconfig.azure.com\n  preserveUnknownFields: false\n  names:\n    kind: GitConfig\n    plural: gitconfigs\n  scope: Namespaced\n  versions:\n  - name: v1beta1\n    schema:\n      openAPIV3Schema:\n        description: GitConfig is the Schema for the gitconfigs API\n        properties:\n          apiVersion:\n            description: 'APIVersion defines the versioned schema of this representation\n              of an object. Servers should convert recognized schemas to the latest\n              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/api-conventions.md#resources'\n            type: string\n          kind:\n            description: 'Kind is a string value representing the REST resource this\n              object represents. Servers may infer this from the endpoint the client\n              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/api-conventions.md#types-kinds'\n            type: string\n          metadata:\n            type: object\n          spec:\n            description: GitConfigSpec defines the desired state of GitConfig\n            properties:\n              deleteOperator:\n                type: boolean\n              giturl:\n                type: string\n              sshKnownHostsContents:\n                type: string\n              operatorClientLocation:\n                type: string\n              operatorParams:\n                type: string\n              operatorType:\n                type: string\n              operatorInstanceName:\n                type: string\n              operatorScope:\n                  type: string\n              correlationId:\n                  type: string\n              enableHelmOperator:\n                  type: boolean\n              helmOperatorProperties:\n                type: object\n                properties:\n                  repoUrl:\n                    type: string\n                  chartName:\n                    type: string\n                  chartVersion:\n                    type: string\n                  chartValues:\n                    type: string\n              protectedParameters:\n                properties:\n                  referenceName:\n                    type: string\n                  version:\n                    type: string\n                required:\n                  - referenceName\n                  - version\n                type: object\n            required:\n              - giturl\n              - operatorClientLocation\n              - operatorParams\n              - operatorType\n              - operatorScope\n              - operatorInstanceName\n              - enableHelmOperator\n            type: object\n          status:\n            description: GitConfigStatus defines the observed state of GitConfig\n            properties:\n              configAppliedTime:\n                type: string\n              lastPolledStatusTime:\n                type: string\n              message:\n                type: string\n              proxyConfigHash:\n                type: string\n              publicKey:\n                type: string\n              status:\n                type: string\n              lastGitCommitInformation:\n                type: string\n              errorsInTheLastSynced:\n                type: string\n              observedGeneration:\n                format: int64\n                type: integer\n              mostRecentEventsFromFlux:\n                type: array\n                items:\n                  type: string\n              isSyncedWithAzure:\n                type: boolean\n              retryCountPublicKey:\n                type: integer\n            required:\n              - configAppliedTime\n              - lastPolledStatusTime\n              - message\n              - proxyConfigHash\n              - publicKey\n              - status\n              - isSyncedWithAzure\n              - retryCountPublicKey\n            type: object\n        type: object\n    served: true\n    storage: true\n    subresources:\n      status: {}\nstatus:\n  acceptedNames:\n    kind: \"\"\n    plural: \"\"\n  conditions: []\n  storedVersions: []\n---\n# Source: azure-arc-k8sagents/templates/clusterconfig.azure.com_healthstates.yaml\napiVersion: apiextensions.k8s.io/v1\nkind: CustomResourceDefinition\nmetadata:\n  labels:\n    app.kubernetes.io/managed-by: Helm\n  annotations:\n    controller-gen.kubebuilder.io/version: v0.4.1\n    meta.helm.sh/release-name: azure-arc\n    meta.helm.sh/release-namespace: azure-arc-release\n  creationTimestamp: null\n  name: healthstates.clusterconfig.azure.com\nspec:\n  group: clusterconfig.azure.com\n  names:\n    kind: HealthState\n    listKind: HealthStateList\n    plural: healthstates\n    singular: healthstate\n  scope: Namespaced\n  versions:\n  - name: v1beta1\n    schema:\n      openAPIV3Schema:\n        description: HealthState is the Schema for the healthstates API\n        properties:\n          apiVersion:\n            description: 'APIVersion defines the versioned schema of this representation of an object. Servers should convert recognized schemas to the latest internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'\n            type: string\n          kind:\n            description: 'Kind is a string value representing the REST resource this object represents. Servers may infer this from the endpoint the client submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'\n            type: string\n          metadata:\n            type: object\n          spec:\n            description: HealthStateSpec defines the desired state of HealthState\n            properties:\n              healthStateObjects:\n                description: HealthStateObjects is the list of HealthState objects which contains state of the resource to be verified\n                items:\n                  properties:\n                    errorCodeForFailure:\n                      description: ErrorCodeForFailure is the error metric to be emitted if resource is not present\n                      type: string\n                    id:\n                      description: 'Id is the full ARM Resource Id of the parent resource (eg: Custom Location) that this object belongs to.'\n                      type: string\n                    location:\n                      description: 'Location is the location of the parent resource (eg: Custom Location)'\n                      type: string\n                    name:\n                      description: Name is the name of the resource that we need to verify\n                      type: string\n                    namespace:\n                      description: Namespace is the namespace that the resource is present in\n                      type: string\n                    type:\n                      description: Type is the type of the resource that we need to verify\n                      type: string\n                  type: object\n                type: array\n            type: object\n          status:\n            description: HealthStateStatus defines the observed state of HealthState\n            type: object\n        type: object\n    served: true\n    storage: true\nstatus:\n  acceptedNames:\n    kind: \"\"\n    plural: \"\"\n  conditions: []\n  storedVersions: []\n---\n# Source: azure-arc-k8sagents/templates/clusterconfig.azure.com_signingkeys.yaml\napiVersion: apiextensions.k8s.io/v1\nkind: CustomResourceDefinition\nmetadata:\n  labels:\n    app.kubernetes.io/managed-by: Helm\n  annotations:\n    controller-gen.kubebuilder.io/version: v0.11.3\n    meta.helm.sh/release-name: azure-arc\n    meta.helm.sh/release-namespace: azure-arc-release\n  creationTimestamp: null\n  name: signingkeys.clusterconfig.azure.com\nspec:\n  group: clusterconfig.azure.com\n  preserveUnknownFields: false\n  names:\n    kind: SigningKey\n    listKind: SigningKeyList\n    plural: signingkeys\n    singular: signingkey\n  scope: Namespaced\n  versions:\n  - name: v1beta1\n    schema:\n      openAPIV3Schema:\n        description: SigningKey is the Schema for the signingkeys API\n        properties:\n          apiVersion:\n            description: 'APIVersion defines the versioned schema of this representation\n              of an object. Servers should convert recognized schemas to the latest\n              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'\n            type: string\n          kind:\n            description: 'Kind is a string value representing the REST resource this\n              object represents. Servers may infer this from the endpoint the client\n              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'\n            type: string\n          metadata:\n            type: object\n          spec:\n            description: SigningKeySpec defines the desired state of SigningKey\n            properties:\n              syncToHisRequestedAt:\n                format: date-time\n                type: string\n              rotateKeysRequestedAt:\n                format: date-time\n                type: string\n            type: object\n          status:\n            description: SigningKeyStatus defines the observed state of SigningKey\n            properties:\n              clusterUid:\n                type: string\n              clusterIssuerUrl:\n                type: string\n              jwksUri:\n                type: string\n              openIdConfiguration:\n                type: string\n              lastHisSyncSuccessTime:\n                format: date-time\n                type: string\n              lastKeyRotatationTime:\n                format: date-time\n                type: string\n            type: object\n        type: object\n    served: true\n    storage: true\n    subresources:\n      status: {}\n---\n# Source: azure-arc-k8sagents/templates/azure-arc-customlocations.yml\napiVersion: rbac.authorization.k8s.io/v1\nkind: ClusterRole\nmetadata:\n  name: AzureArc-Microsoft.ExtendedLocation-RP-Role\nrules:\n- apiGroups: [\"*\"]\n  resources: [\"namespaces\", \"roles\", \"rolebindings\", \"serviceaccounts\"]\n  verbs: [\"*\"]\n- apiGroups: [\"clusterconfig.azure.com\"]\n  resources: [\"healthstates\"]\n  verbs: [\"*\"]\n---\n# Source: azure-arc-k8sagents/templates/azure-arc-kube-aad-proxy-roles.yaml\nkind: ClusterRole\napiVersion: rbac.authorization.k8s.io/v1\nmetadata:\n  name: azure-arc-kube-aad-proxy-operator\n  labels:\n    app.kubernetes.io/name: azure-arc-k8s\n    app.kubernetes.io/component: aad-proxy-role\nrules:\n- apiGroups:\n  - \"\"\n  resources:\n  - \"users\"\n  - \"groups\"\n  - \"serviceaccounts\"\n  verbs:\n  - \"impersonate\"\n- apiGroups:\n  - \"authentication.k8s.io\"\n  resources:\n  - \"userextras/oid\"\n  - \"userextras/obo\"\n  verbs:\n  - \"impersonate\"\n---\n# Source: azure-arc-k8sagents/templates/azure-agent-clusterrolebinding.yaml\napiVersion: rbac.authorization.k8s.io/v1\nkind: ClusterRoleBinding\nmetadata:\n  name: azure-arc-operator\nroleRef:\n  apiGroup: rbac.authorization.k8s.io\n  kind: ClusterRole\n  name: cluster-admin\nsubjects:\n  - kind: ServiceAccount\n    name: azure-arc-operatorsa\n    namespace: azure-arc\n---\n# Source: azure-arc-k8sagents/templates/azure-arc-customlocations.yml\napiVersion: rbac.authorization.k8s.io/v1\nkind: ClusterRoleBinding\nmetadata:\n  name: AzureArc-Microsoft.ExtendedLocation-RP-RoleBinding\n  annotations:\n    connectedclusters.arc.azure.com/skip-authz-check : \"true\"\nroleRef:\n  apiGroup: rbac.authorization.k8s.io\n  kind: ClusterRole\n  name: AzureArc-Microsoft.ExtendedLocation-RP-Role\nsubjects:\n- kind: User\n  name: 51dfe1e8-70c6-4de5-a08e-e18aff23d815\n  apiGroup: rbac.authorization.k8s.io\n---\n# Source: azure-arc-k8sagents/templates/azure-arc-kube-aad-proxy-roles.yaml\nkind: ClusterRoleBinding\napiVersion: rbac.authorization.k8s.io/v1\nmetadata:\n  name: azure-arc-kube-aad-proxy-operator-binding\nroleRef:\n  apiGroup: rbac.authorization.k8s.io\n  kind: ClusterRole\n  name: azure-arc-kube-aad-proxy-operator\nsubjects:\n- kind: ServiceAccount\n  name: azure-arc-kube-aad-proxy-sa\n  namespace: azure-arc\n---\n# Source: azure-arc-k8sagents/templates/azure-arc-kube-aad-proxy-roles.yaml\nkind: Role\napiVersion: rbac.authorization.k8s.io/v1\nmetadata:\n  name: azure-arc-kube-aad-proxy-operator-secret-reader\n  namespace: azure-arc\n  labels:\n    app.kubernetes.io/name: azure-arc-k8s\n    app.kubernetes.io/component: aad-proxy-role\nrules:\n- apiGroups:\n  - \"\"\n  resources:\n  - \"secrets\"\n  verbs: [\"get\",\"watch\",\"list\"]\n- apiGroups:\n  - \"clusterconfig.azure.com\"\n  resources:\n  - \"azureclusteridentityrequests\"\n  - \"azureclusteridentityrequests/status\"\n  verbs: [\"get\",\"watch\",\"list\",\"create\", \"update\", \"patch\", \"delete\" ]\n---\n# Source: azure-arc-k8sagents/templates/azure-arc-kube-aad-proxy-roles.yaml\nkind: RoleBinding\napiVersion: rbac.authorization.k8s.io/v1\nmetadata:\n  name: azure-arc-kube-aad-proxy-operator-secret-binding\n  namespace: azure-arc\nroleRef:\n  apiGroup: rbac.authorization.k8s.io\n  kind: Role\n  name: azure-arc-kube-aad-proxy-operator-secret-reader\nsubjects:\n- kind: ServiceAccount\n  name: azure-arc-kube-aad-proxy-sa\n---\n# Source: azure-arc-k8sagents/templates/azure-arc-kube-aad-proxy-deployment.yaml\napiVersion: v1\nkind: Service\nmetadata:\n  name: kube-aad-proxy\n  namespace: azure-arc\n  labels:\n    app.kubernetes.io/name: azure-arc-k8s\n    app.kubernetes.io/component: kube-aad-proxy\nspec:\n  type: ClusterIP\n  ports:\n    - port: 443\n      targetPort: 8443\n      protocol: TCP\n      name: https\n    - port: 8080\n      targetPort: 8080\n      protocol: TCP\n      name: metrics\n  selector:\n    app.kubernetes.io/name: azure-arc-k8s\n    app.kubernetes.io/component: kube-aad-proxy\n---\n# Source: azure-arc-k8sagents/templates/azure-arc-logcollector-service.yaml\napiVersion: v1\nkind: Service\nmetadata:\n  creationTimestamp: null\n  labels:\n    app.kubernetes.io/name: azure-arc-k8s\n    app.kubernetes.io/component: logcollector\n  name: logcollector\n  namespace: azure-arc\nspec:\n  type: ClusterIP\n  ports:\n  - name: api\n    port: 24224\n    protocol: TCP\n    targetPort: 24224\n  selector:\n    app.kubernetes.io/name: azure-arc-k8s\n    app.kubernetes.io/component: logcollector\n---\n# Source: azure-arc-k8sagents/templates/azure-extension-event-collector.yaml\nkind: Service\napiVersion: v1\nmetadata:\n  name: extension-events-collector\n  namespace: azure-arc\nspec:\n  selector:\n    app.kubernetes.io/name: azure-arc-k8s\n    app.kubernetes.io/component: extension-events-collector\n  ports:\n  - protocol: TCP\n    port: 8082\n    targetPort: 8082\n---\n# Source: azure-arc-k8sagents/templates/azure-extensionoperator.yaml\napiVersion: v1\nkind: Service\nmetadata:\n  name: extension-manager-svc\n  namespace: azure-arc\n  labels:\n    app.kubernetes.io/name: azure-arc-k8s\n    app.kubernetes.io/component: extension-manager\nspec:\n  clusterIP: None\n  ports:\n    - port: 8081\n      targetPort: 8081\n      protocol: TCP\n      name: customlocationhealthmetrics\n  selector:\n    app.kubernetes.io/name: azure-arc-k8s\n    app.kubernetes.io/component: extension-manager\n---\n# Source: azure-arc-k8sagents/templates/azure-flux-logs-agent-deployment.yaml\nkind: Service\napiVersion: v1\nmetadata:\n  name: flux-logs-agent\n  namespace: azure-arc\nspec:\n  selector:\n    app.kubernetes.io/name: azure-arc-k8s\n    app.kubernetes.io/component: flux-logs-agent\n  ports:\n  - protocol: TCP\n    port: 80\n    targetPort: 8082\n---\n# Source: azure-arc-k8sagents/templates/azure-arc-cluster-metadata-operator-deployment.yaml\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: cluster-metadata-operator\n  namespace: azure-arc\n  labels:\n    app.kubernetes.io/name:  azure-arc-k8s\n    app.kubernetes.io/component: cluster-metadata-operator\n  annotations:\n    description: A Helm chart for azure-arc-k8sagents\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      app.kubernetes.io/name: azure-arc-k8s\n      app.kubernetes.io/component: cluster-metadata-operator\n  template:\n    metadata:\n      labels:\n        app.kubernetes.io/name: azure-arc-k8s\n        app.kubernetes.io/component: cluster-metadata-operator\n      annotations:\n        checksum/proxysecret: 04aaf56b6e776464f24481f3883434a0bf5137d460a57a6504ada83b00838570\n        checksum/fluent-bit-config: cd69265806f5fa7328a22ef387f02033ba9cd96d3ef14daeb5fbfb073879f8cb\n        prometheus.io/scrape: \"true\"\n        prometheus.io/port: \"8080\"\n    spec:\n      serviceAccountName:        \r\n        \"azure-arc-operatorsa\"\n      affinity:\n        nodeAffinity:\n          requiredDuringSchedulingIgnoredDuringExecution:\n            nodeSelectorTerms:\n            - matchExpressions:\n              - key: kubernetes.io/arch\n                operator: In\n                values:\n                - amd64\n                - arm64\n      nodeSelector:\n        kubernetes.io/os: linux\n      hostIPC: false\n      hostPID: false\n      hostNetwork: false\n      containers:\n        - name: cluster-metadata-operator\n          image: \"mcr.microsoft.com/azurearck8s/cluster-metadata-operator:1.21.10\"\n          imagePullPolicy: IfNotPresent\n          resources:\n            limits:\n              cpu: 50m\n              memory: 100Mi\n            requests:\n              cpu: 5m\n              memory: 20Mi\n          securityContext:\n            readOnlyRootFilesystem: true\n            allowPrivilegeEscalation: false\n            runAsNonRoot: true\n            runAsUser: 13243\n            runAsGroup: 12434\n          envFrom:\n          - configMapRef:\n              name: azure-clusterconfig\n          \n          env:\n            - name: RESYNC_AFTER\n              value: \"300\"\n        - name: fluent-bit\n          image: \"mcr.microsoft.com/azurearck8s/fluent-bit:1.21.10\"\n          imagePullPolicy: IfNotPresent\n          securityContext:\n            readOnlyRootFilesystem: true\n            \n            capabilities:\n              drop:\n                - ALL\n\n          resources:\n            limits:\n              cpu: 20m\n              memory: 100Mi\n            requests:\n              cpu: 5m\n              memory: 25Mi\n          envFrom:\n            - configMapRef:\n                name: azure-clusterconfig\n          \n          env:\n            - name: POD_NAME\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.name\n            - name: AGENT_TYPE\n              value: \"ConnectAgent\"\n            - name: AGENT_NAME\n              value: \"ClusterMetadataOperator\"\n          \n          volumeMounts:\n          - name: varlog\n            mountPath: /var/log\n            readOnly: true\n          - name: varlibdockercontainers\n            mountPath: /var/lib/docker/containers\n            readOnly: true\n          - name: fluentbit-clusterconfig\n            mountPath: /fluent-bit/etc/\n      volumes:\n        - name: varlog\n          hostPath:\n            path: /var/log\n        - name: varlibdockercontainers\n          hostPath:\n            path: /var/lib/docker/containers\n        - name: fluentbit-clusterconfig\n          configMap:\n            name: azure-fluentbit-config\n---\n# Source: azure-arc-k8sagents/templates/azure-arc-clusterconnect-agent-deployment.yaml\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: clusterconnect-agent\n  namespace: azure-arc\n  labels:\n    app.kubernetes.io/name:  azure-arc-k8s\n    app.kubernetes.io/component: clusterconnect-agent\n  annotations:\n    description: A Helm chart for azure-arc-k8sagents\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      app.kubernetes.io/name: azure-arc-k8s\n      app.kubernetes.io/component: clusterconnect-agent\n  template:\n    metadata:\n      labels:\n        app.kubernetes.io/name: azure-arc-k8s\n        app.kubernetes.io/component: clusterconnect-agent\n      annotations:\n        checksum/proxysecret: 04aaf56b6e776464f24481f3883434a0bf5137d460a57a6504ada83b00838570\n        checksum/fluent-bit-config: cd69265806f5fa7328a22ef387f02033ba9cd96d3ef14daeb5fbfb073879f8cb\n        prometheus.io/scrape: \"true\"\n        prometheus.io/port: \"8080\"\n    spec:\n      serviceAccountName:        \r\n        \"azure-arc-operatorsa\"\n      affinity:\n        nodeAffinity:\n          requiredDuringSchedulingIgnoredDuringExecution:\n            nodeSelectorTerms:\n            - matchExpressions:\n              - key: kubernetes.io/arch\n                operator: In\n                values:\n                - amd64\n                - arm64\n      nodeSelector:\n        kubernetes.io/os: linux\n      hostIPC: false\n      hostPID: false\n      hostNetwork: false\n      containers:\n        - name: clusterconnect-agent\n          image: \"mcr.microsoft.com/azurearck8s/clusterconnect-agent:1.21.10\"\n          imagePullPolicy: IfNotPresent\n\n          securityContext:\n            readOnlyRootFilesystem: false\n            allowPrivilegeEscalation: false\n            runAsNonRoot: true\n            runAsUser: 13243\n            runAsGroup: 12434\n          envFrom:\n            - configMapRef:\n                name: azure-clusterconfig\n          \n          env:\n            - name: CONNECT_DP_ENDPOINT_OVERRIDE\n              value: \n            - name: PROXY_VERSION\n              value: v2\n            - name: NOTIFICATION_DP_ENDPOINT_OVERRIDE\n              value: \n            - name: RELAY_ENDPOINT_SUFFIX_OVERRIDE\n              value: \n           \n            - name: TARGET_SERVICE_HOST\n              value: KUBEAADPROXY_SERVICE_HOST\n            - name: TARGET_SERVICE_PORT\n              value: KUBEAADPROXY_SERVICE_PORT\n            - name: KUBEAADPROXY_SERVICE_HOST\n              value: \"kube-aad-proxy.azure-arc\"\n            - name: KUBEAADPROXY_SERVICE_PORT\n              value: \"443\"\n           \n        - name: fluent-bit\n          image: \"mcr.microsoft.com/azurearck8s/fluent-bit:1.21.10\"\n          imagePullPolicy: IfNotPresent\n          securityContext:\n            readOnlyRootFilesystem: true\n            \n            capabilities:\n              drop:\n                - ALL\n\n          resources:\n            limits:\n              cpu: 20m\n              memory: 100Mi\n            requests:\n              cpu: 5m\n              memory: 25Mi\n          envFrom:\n            - configMapRef:\n                name: azure-clusterconfig\n          \n          env:\n            - name: POD_NAME\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.name\n            - name: AGENT_TYPE\n              value: \"ConnectAgent\"\n            - name: AGENT_NAME\n              value: \"ClusterConnectAgent\"\n          volumeMounts:\n          - name: varlog\n            mountPath: /var/log\n            readOnly: true\n          - name: varlibdockercontainers\n            mountPath: /var/lib/docker/containers\n            readOnly: true\n          - name: fluentbit-clusterconfig\n            mountPath: /fluent-bit/etc/\n        - name: clusterconnectservice-operator\n          image: \"mcr.microsoft.com/azurearck8s/clusterconnectservice-operator:1.21.10\"\n          imagePullPolicy: IfNotPresent\n          ports:\n            - containerPort: 9443\n          envFrom:\n          - configMapRef:\n              name: azure-clusterconfig\n          \n\n          resources:\n            limits:\n              cpu: 100m\n              memory: 400Mi\n            requests:\n              cpu: 10m\n              memory: 20Mi\n          volumeMounts:\n      volumes:\n        - name: varlog\n          hostPath:\n            path: /var/log\n        - name: varlibdockercontainers\n          hostPath:\n            path: /var/lib/docker/containers\n        - name: fluentbit-clusterconfig\n          configMap:\n            name: azure-fluentbit-config\n---\n# Source: azure-arc-k8sagents/templates/azure-arc-kube-aad-proxy-deployment.yaml\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: kube-aad-proxy\n  namespace: azure-arc\n  labels:\n    app.kubernetes.io/name:  azure-arc-k8s\n    app.kubernetes.io/component: kube-aad-proxy\n  annotations:\n    description: A Helm chart for azure-arc-k8sagents\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      app.kubernetes.io/name: azure-arc-k8s\n      app.kubernetes.io/component: kube-aad-proxy\n  template:\n    metadata:\n      labels:\n        app.kubernetes.io/name: azure-arc-k8s\n        app.kubernetes.io/component: kube-aad-proxy\n      annotations:\n        checksum/proxysecret: 04aaf56b6e776464f24481f3883434a0bf5137d460a57a6504ada83b00838570\n        checksum/fluent-bit-config: cd69265806f5fa7328a22ef387f02033ba9cd96d3ef14daeb5fbfb073879f8cb\n        prometheus.io/scrape: \"true\"\n        prometheus.io/port: \"8080\"\n    spec:\n      serviceAccountName:        \r\n        \"azure-arc-kube-aad-proxy-sa\"\n      hostIPC: false\n      hostPID: false\n      hostNetwork: false\n      containers:\n      - name: kube-aad-proxy\n        image: \"mcr.microsoft.com/azurearck8s/kube-aad-proxy:1.21.10\"\n        imagePullPolicy: IfNotPresent\n        ports:\n        - containerPort: 8443\n          name: https\n        - containerPort: 8080\n          name: metrics\n        readinessProbe:\n            httpGet:\n              path: /readiness\n              port: 8080\n              scheme: \"HTTP\"\n            initialDelaySeconds: 10\n            periodSeconds: 15\n        args:\n          - \"run\"\n          - \"--secure-port=8443\"\n          - \"--tls-cert-file=/etc/kube-aad-proxy/tls.crt\"\n          - \"--tls-private-key-file=/etc/kube-aad-proxy/tls.key\"\n          - \"--azure.client-id=6256c85f-0aad-4d50-b960-e6e9b21efe35\"\n          - \"--azure.tenant-id=72f988bf-86f1-41af-91ab-2d7cd011db47\"\n          - \"--azure.enforce-PoP=true\"\n          - \"--azure.skip-host-check=false\"\n          - \"-v=info\"\n          - \"--azure.environment=AZUREPUBLICCLOUD\"\n          \n        resources:\n            limits:\n              cpu: 100m\n              memory: 350Mi\n            requests:\n              cpu: 10m\n              memory: 20Mi\n        env:\n        envFrom:\n          - configMapRef:\n              name: azure-clusterconfig\n        \n        volumeMounts:\n          - name: kube-aad-proxy-tls\n            mountPath: /etc/kube-aad-proxy\n            readOnly: true\n        securityContext:\n            \n            runAsNonRoot: true\n            runAsUser: 13243\n            runAsGroup: 12434\n            \n            readOnlyRootFilesystem: true\n            allowPrivilegeEscalation: false\n            capabilities:\n              drop:\n                - ALL\n      - name: fluent-bit\n        image: \"mcr.microsoft.com/azurearck8s/fluent-bit:1.21.10\"\n        imagePullPolicy: IfNotPresent\n        securityContext:\n          readOnlyRootFilesystem: true\n          \n          capabilities:\n            drop:\n              - ALL\n\n        resources:\n            limits:\n              cpu: 20m\n              memory: 100Mi\n            requests:\n              cpu: 5m\n              memory: 25Mi\n        envFrom:\n          - configMapRef:\n              name: azure-clusterconfig\n        env:\n          - name: POD_NAME\n            valueFrom:\n              fieldRef:\n                fieldPath: metadata.name\n          - name: AGENT_TYPE\n            value: \"ConnectAgent\"\n          - name: AGENT_NAME\n            value: \"kube-aad-proxy\"\n        volumeMounts:\n        - name: varlog\n          mountPath: /var/log\n          readOnly: true\n        - name: varlibdockercontainers\n          mountPath: /var/lib/docker/containers\n          readOnly: true\n        - name: fluentbit-clusterconfig\n          mountPath: /fluent-bit/etc/\n      volumes:\n        - name: kube-aad-proxy-tls\n          secret:\n            secretName: kube-aad-proxy-certificate\n        - name: varlog\n          hostPath:\n            path: /var/log\n        - name: varlibdockercontainers\n          hostPath:\n            path: /var/lib/docker/containers\n        - name: fluentbit-clusterconfig\n          configMap:\n            name: azure-fluentbit-config\n      nodeSelector:\n        kubernetes.io/os: linux\n      affinity:\n        nodeAffinity:\n          requiredDuringSchedulingIgnoredDuringExecution:\n            nodeSelectorTerms:\n            - matchExpressions:\n              - key: kubernetes.io/arch\n                operator: In\n                values:\n                - amd64\n                - arm64\n  strategy:\n    type: RollingUpdate\n    rollingUpdate:\n      maxSurge: 1\n      maxUnavailable: 0\n---\n# Source: azure-arc-k8sagents/templates/azure-arc-logcollector-deployment.yaml\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: logcollector\n  namespace: azure-arc\n  labels:\n    app.kubernetes.io/name: azure-arc-k8s\n    app.kubernetes.io/component: logcollector\n  annotations:\n    description: A Helm chart for azure-arc-k8sagents\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      app.kubernetes.io/name: azure-arc-k8s\n      app.kubernetes.io/component: logcollector\n  template:\n    metadata:\n      labels:\n        app.kubernetes.io/name: azure-arc-k8s\n        app.kubernetes.io/component: logcollector\n      annotations:\n        checksum/proxysecret: 04aaf56b6e776464f24481f3883434a0bf5137d460a57a6504ada83b00838570\n        checksum/fluent-bit-config: 2ee08bd8ffa8078518ee126abefa65bd496edadfddb6dccf418f71ba1c339f71\n    spec:\n      serviceAccountName:        \r\n        \"azure-arc-operatorsa\"\n      hostIPC: false\n      hostPID: false\n      hostNetwork: false\n      affinity:\n        nodeAffinity:\n          requiredDuringSchedulingIgnoredDuringExecution:\n            nodeSelectorTerms:\n            - matchExpressions:\n              - key: kubernetes.io/arch\n                operator: In\n                values:\n                - amd64\n                - arm64\n      nodeSelector:\n        kubernetes.io/os: linux\n      containers:\n        - name: fluent-bit\n          image: \"mcr.microsoft.com/azurearck8s/fluent-bit-collector:1.21.10\"\n          imagePullPolicy: IfNotPresent\n          securityContext:\n            readOnlyRootFilesystem: true\n            capabilities:\n              drop:\n                - ALL\n          resources:\n            limits:\n              cpu: 50m\n              memory: 250Mi\n            requests:\n              cpu: 10m\n              memory: 120Mi\n          envFrom:\n            - configMapRef:\n                name: azure-clusterconfig\n          \n          env:\n            - name: POD_NAME\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.name\n            - name: AGENT_TYPE\n              value: \"ConnectAgent\"\n            - name: AGENT_NAME\n              value: \"LogCollector\"\n          volumeMounts:\n          - name: fluentbit-clusterconfig\n            mountPath: /fluent-bit/etc/\n          - name: varlog\n            mountPath: /var/log\n            readOnly: true\n          - name: varlibdockercontainers\n            mountPath: /var/lib/docker/containers\n            readOnly: true\n      volumes:\n        - name: fluentbit-clusterconfig\n          configMap:\n            name: azure-fluentbit-collector-config\n        - name: varlog\n          hostPath:\n            path: /var/log\n        - name: varlibdockercontainers\n          hostPath:\n            path: /var/lib/docker/containers\n---\n# Source: azure-arc-k8sagents/templates/azure-arc-metrics-agent-deployment.yaml\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: metrics-agent\n  namespace: azure-arc\n  labels:\n    app.kubernetes.io/name: azure-arc-k8s\n    app.kubernetes.io/component: metrics-agent\n  annotations:\n    description: A Helm chart for azure-arc-k8sagents\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      app.kubernetes.io/name: azure-arc-k8s\n      app.kubernetes.io/component: metrics-agent\n  template:\n    metadata:\n      labels:\n        app.kubernetes.io/name: azure-arc-k8s\n        app.kubernetes.io/component: metrics-agent\n      annotations:\n        checksum/proxysecret: 04aaf56b6e776464f24481f3883434a0bf5137d460a57a6504ada83b00838570\n        checksum/telegrafconf: 8deeaad9195dba476fa474cdae641ba62e21e6d031985501aea8464735a4d239\n        checksum/fluent-bit-config: cd69265806f5fa7328a22ef387f02033ba9cd96d3ef14daeb5fbfb073879f8cb\n        prometheus.io/scrape: \"true\"\n        prometheus.io/port: \"8080\"\n    spec:\n      serviceAccountName:        \r\n        \"azure-arc-operatorsa\"\n      affinity:\n        nodeAffinity:\n          requiredDuringSchedulingIgnoredDuringExecution:\n            nodeSelectorTerms:\n            - matchExpressions:\n              - key: kubernetes.io/arch\n                operator: In\n                values:\n                - amd64\n                - arm64\n      nodeSelector:\n        kubernetes.io/os: linux\n      hostIPC: false\n      hostPID: false\n      hostNetwork: false\n      containers:\n        - name: metrics-agent\n          image: \"mcr.microsoft.com/azurearck8s/metrics-agent:1.21.10\"\n          imagePullPolicy: IfNotPresent\n          securityContext:\n            readOnlyRootFilesystem: true\n            allowPrivilegeEscalation: false\n            runAsNonRoot: true\n            runAsUser: 13243\n            runAsGroup: 12434\n          resources:\n            limits:\n              cpu: 50m\n              memory: 100Mi\n            requests:\n              cpu: 5m\n              memory: 20Mi\n          envFrom:\n            - configMapRef:\n                name: azure-clusterconfig\n          \n          env:\n            - name: DP_SUFFIX\n              value: \"com\"\n          \n            - name: GOMEMLIMIT\n              value: \"95MiB\"\n\n          volumeMounts:\n            - name: telegraf-conf\n              mountPath: /etc/telegraf/telegraf.conf\n              subPath: telegraf.conf\n        - name: fluent-bit\n          image: \"mcr.microsoft.com/azurearck8s/fluent-bit:1.21.10\"\n          imagePullPolicy: IfNotPresent\n          securityContext:\n            readOnlyRootFilesystem: true\n            \n            capabilities:\n              drop:\n                - ALL\n\n          resources:\n            limits:\n              cpu: 20m\n              memory: 100Mi\n            requests:\n              cpu: 5m\n              memory: 25Mi\n          envFrom:\n            - configMapRef:\n                name: azure-clusterconfig\n          \n          env:\n            - name: POD_NAME\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.name\n            - name: AGENT_TYPE\n              value: \"ConnectAgent\"\n            - name: AGENT_NAME\n              value: \"MetricsAgent\"\n          volumeMounts:\n          - name: varlog\n            mountPath: /var/log\n            readOnly: true\n          - name: varlibdockercontainers\n            mountPath: /var/lib/docker/containers\n            readOnly: true\n          - name: fluentbit-clusterconfig\n            mountPath: /fluent-bit/etc/\n      volumes:\n        - name: varlog\n          hostPath:\n            path: /var/log\n        - name: varlibdockercontainers\n          hostPath:\n            path: /var/lib/docker/containers\n        - name: fluentbit-clusterconfig\n          configMap:\n            name: azure-fluentbit-config\n        - name: telegraf-conf\n          configMap:\n            name: azure-telegraf-config\n---\n# Source: azure-arc-k8sagents/templates/azure-clusteridentityoperator.yaml\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: clusteridentityoperator\n  namespace: azure-arc\n  labels:\n    control-plane: cluster-identity-manager\n    app.kubernetes.io/name: azure-arc-k8s\n    app.kubernetes.io/component: cluster-identity-operator\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      control-plane: cluster-identity-manager\n  template:\n    metadata:\n      labels:\n        control-plane: cluster-identity-manager\n        app.kubernetes.io/name: azure-arc-k8s\n        app.kubernetes.io/component: cluster-identity-operator\n      annotations:\n        checksum/proxysecret: 04aaf56b6e776464f24481f3883434a0bf5137d460a57a6504ada83b00838570\n        checksum/secrets: 8e8feac2ceda88d9edc248b479c89ea17cf589c648a2f5de99dec80da742920b\n        checksum/azureconfig: a8e8d70172d7dbf909cbd44b452e5a2a48180ecdc31f0954e10c3fa8b69e244c\n        checksum/fluent-bit-config: cd69265806f5fa7328a22ef387f02033ba9cd96d3ef14daeb5fbfb073879f8cb\n        prometheus.io/scrape: \"true\"\n        prometheus.io/port: \"8080\"\n    spec:\n      serviceAccountName:        \r\n        \"azure-arc-operatorsa\"\n      affinity:\n        nodeAffinity:\n          requiredDuringSchedulingIgnoredDuringExecution:\n            nodeSelectorTerms:\n            - matchExpressions:\n              - key: kubernetes.io/arch\n                operator: In\n                values:\n                - amd64\n                - arm64\n      nodeSelector:\n        kubernetes.io/os: linux\n      hostIPC: false\n      hostPID: false\n      hostNetwork: false\n      containers:\n        - name: manager\n          \n          image: \"mcr.microsoft.com/azurearck8s/cluster-identity:1.21.10\"\n          imagePullPolicy: IfNotPresent\n          env:\n          - name: USE_UPSTREAM_PROXY\n            value:  \"false\"\n          - name: POD_NAME\n            valueFrom:\n              fieldRef:\n                fieldPath: metadata.name\n          \n          \n          envFrom:\n          - configMapRef:\n              name: azure-clusterconfig\n          \n          \n          resources:\n            limits:\n              cpu: 100m\n              memory: 300Mi\n            requests:\n              cpu: 100m\n              memory: 100Mi\n          securityContext:\n            readOnlyRootFilesystem: true\n            allowPrivilegeEscalation: false\n            runAsNonRoot: true\n            runAsUser: 13243\n            runAsGroup: 12434\n          \n        - name: fluent-bit\n          image: \"mcr.microsoft.com/azurearck8s/fluent-bit:1.21.10\"\n          imagePullPolicy: IfNotPresent\n          securityContext:\n            readOnlyRootFilesystem: true\n            \n            capabilities:\n              drop:\n                - ALL\n\n          resources:\n            limits:\n              cpu: 20m\n              memory: 100Mi\n            requests:\n              cpu: 5m\n              memory: 25Mi\n          envFrom:\n            - configMapRef:\n                name: azure-clusterconfig\n          \n          env:\n            - name: POD_NAME\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.name\n            - name: AGENT_TYPE\n              value: \"ConfigAgent\"\n            - name: AGENT_NAME\n              value: \"IdentityController\"\n          volumeMounts:\n          - name: varlog\n            mountPath: /var/log\n            readOnly: true\n          - name: varlibdockercontainers\n            mountPath: /var/lib/docker/containers\n            readOnly: true\n          - name: fluentbit-clusterconfig\n            mountPath: /fluent-bit/etc/\n      volumes:\n        - name: varlog\n          hostPath:\n            path: /var/log\n        - name: varlibdockercontainers\n          hostPath:\n            path: /var/lib/docker/containers\n        - name: fluentbit-clusterconfig\n          configMap:\n            name: azure-fluentbit-config\n      terminationGracePeriodSeconds: 10\n---\n# Source: azure-arc-k8sagents/templates/azure-config-agent-deployment.yaml\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: config-agent\n  namespace: azure-arc\n  labels:\n    app.kubernetes.io/name: azure-arc-k8s\n    app.kubernetes.io/component: config-agent\n  annotations:\n    description: A Helm chart for azure-arc-k8sagents\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      app.kubernetes.io/name: azure-arc-k8s\n      app.kubernetes.io/component: config-agent\n  template:\n    metadata:\n      labels:\n        app.kubernetes.io/name: azure-arc-k8s\n        app.kubernetes.io/component: config-agent\n      annotations:\n        checksum/proxysecret: 04aaf56b6e776464f24481f3883434a0bf5137d460a57a6504ada83b00838570\n        checksum/secrets: 8e8feac2ceda88d9edc248b479c89ea17cf589c648a2f5de99dec80da742920b\n        checksum/azureconfig: a8e8d70172d7dbf909cbd44b452e5a2a48180ecdc31f0954e10c3fa8b69e244c\n        checksum/fluent-bit-config: cd69265806f5fa7328a22ef387f02033ba9cd96d3ef14daeb5fbfb073879f8cb\n        extensionEnabled: \"true\"\n        prometheus.io/scrape: \"true\"\n        prometheus.io/port: \"8080\"\n    spec:\n      serviceAccountName:        \r\n        \"azure-arc-operatorsa\"\n      affinity:\n        nodeAffinity:\n          requiredDuringSchedulingIgnoredDuringExecution:\n            nodeSelectorTerms:\n            - matchExpressions:\n              - key: kubernetes.io/arch\n                operator: In\n                values:\n                - amd64\n                - arm64\n      nodeSelector:\n        kubernetes.io/os: linux\n      hostIPC: false\n      hostPID: false\n      hostNetwork: false\n      containers:\n        - name: config-agent\n          image: \"mcr.microsoft.com/azurearck8s/config-agent:1.21.10\"\n          imagePullPolicy: IfNotPresent\n\n          resources:\n            limits:\n              cpu: 50m\n              memory: 200Mi\n            requests:\n              cpu: 5m\n              memory: 128Mi\n          envFrom:\n            - configMapRef:\n                name: azure-clusterconfig\n          \n          securityContext:\n            readOnlyRootFilesystem: false\n            \n\n          \n          readinessProbe:\n            httpGet:\n              path: /ready\n              port: 9090\n              scheme: \"HTTP\"\n            initialDelaySeconds: 10\n            periodSeconds: 15\n        - name: fluent-bit\n          image: \"mcr.microsoft.com/azurearck8s/fluent-bit:1.21.10\"\n          imagePullPolicy: IfNotPresent\n          securityContext:\n            readOnlyRootFilesystem: true\n            \n            capabilities:\n              drop:\n                - ALL\n\n          resources:\n            limits:\n              cpu: 20m\n              memory: 100Mi\n            requests:\n              cpu: 5m\n              memory: 25Mi\n          envFrom:\n            - configMapRef:\n                name: azure-clusterconfig\n          \n          env:\n            - name: POD_NAME\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.name\n            - name: AGENT_TYPE\n              value: \"ConfigAgent\"\n            - name: AGENT_NAME\n              value: \"ConfigAgent\"\n          volumeMounts:\n          - name: varlog\n            mountPath: /var/log\n            readOnly: true\n          - name: varlibdockercontainers\n            mountPath: /var/lib/docker/containers\n            readOnly: true\n          - name: fluentbit-clusterconfig\n            mountPath: /fluent-bit/etc/\n      volumes:\n        - name: varlog\n          hostPath:\n            path: /var/log\n        - name: varlibdockercontainers\n          hostPath:\n            path: /var/lib/docker/containers\n        - name: fluentbit-clusterconfig\n          configMap:\n            name: azure-fluentbit-config\n  strategy:\n    type: RollingUpdate\n    rollingUpdate:\n      maxSurge: 1\n      maxUnavailable: 0\n---\n# Source: azure-arc-k8sagents/templates/azure-configoperator.yaml\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: controller-manager\n  namespace: azure-arc\n  labels:\n    control-plane: controller-manager\n    app.kubernetes.io/name: azure-arc-k8s\n    app.kubernetes.io/component: controller-manager\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      control-plane: controller-manager\n  template:\n    metadata:\n      labels:\n        control-plane: controller-manager\n        app.kubernetes.io/name: azure-arc-k8s\n        app.kubernetes.io/component: controller-manager\n      annotations:\n        checksum/proxysecret: 04aaf56b6e776464f24481f3883434a0bf5137d460a57a6504ada83b00838570\n        checksum/fluent-bit-config: cd69265806f5fa7328a22ef387f02033ba9cd96d3ef14daeb5fbfb073879f8cb\n        prometheus.io/scrape: \"true\"\n        prometheus.io/port: \"8080\"\n    spec:\n      serviceAccountName:        \r\n        \"azure-arc-operatorsa\"\n      affinity:\n        nodeAffinity:\n          requiredDuringSchedulingIgnoredDuringExecution:\n            nodeSelectorTerms:\n            - matchExpressions:\n              - key: kubernetes.io/arch\n                operator: In\n                values:\n                - amd64\n                - arm64\n      nodeSelector:\n        kubernetes.io/os: linux\n      hostIPC: false\n      hostPID: false\n      hostNetwork: false\n      containers:\n        - name: manager\n          \n          image: \"mcr.microsoft.com/azurearck8s/configoperator:1.21.10\"\n          imagePullPolicy: IfNotPresent\n          envFrom:\n            - configMapRef:\n                name: azure-clusterconfig\n          \n          env:\n            - name: PROXY_CONFIG_HASH\n              value: 04aaf56b6e776464f24481f3883434a0bf5137d460a57a6504ada83b00838570\n            - name: POD_NAME\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.name\n\n          resources:\n            limits:\n              cpu: 200m\n              memory: 350Mi\n            requests:\n              cpu: 100m\n              memory: 150Mi\n          securityContext:\n            readOnlyRootFilesystem: false\n            allowPrivilegeEscalation: false\n          \n        - name: fluent-bit\n          image: \"mcr.microsoft.com/azurearck8s/fluent-bit:1.21.10\"\n          imagePullPolicy: IfNotPresent\n          securityContext:\n            readOnlyRootFilesystem: true\n            \n            capabilities:\n              drop:\n                - ALL\n\n          resources:\n            limits:\n              cpu: 20m\n              memory: 100Mi\n            requests:\n              cpu: 5m\n              memory: 25Mi\n          envFrom:\n            - configMapRef:\n                name: azure-clusterconfig\n          \n          env:\n            - name: POD_NAME\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.name\n            - name: AGENT_TYPE\n              value: \"ConfigAgent\"\n            - name: AGENT_NAME\n              value: \"ConfigController\"\n          volumeMounts:\n          - name: varlog\n            mountPath: /var/log\n            readOnly: true\n          - name: varlibdockercontainers\n            mountPath: /var/lib/docker/containers\n            readOnly: true\n          - name: fluentbit-clusterconfig\n            mountPath: /fluent-bit/etc/\n      volumes:\n        - name: varlog\n          hostPath:\n            path: /var/log\n        - name: varlibdockercontainers\n          hostPath:\n            path: /var/lib/docker/containers\n        - name: fluentbit-clusterconfig\n          configMap:\n            name: azure-fluentbit-config\n      terminationGracePeriodSeconds: 10\n---\n# Source: azure-arc-k8sagents/templates/azure-extension-event-collector.yaml\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: extension-events-collector\n  namespace: azure-arc\n  labels:\n    app.kubernetes.io/name: azure-arc-k8s\n    app.kubernetes.io/component: extension-events-collector\n  annotations:\n    description: A Helm chart for azure-arc-k8sagents\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      app.kubernetes.io/name: azure-arc-k8s\n      app.kubernetes.io/component: extension-events-collector\n  template:\n    metadata:\n      labels:\n        app.kubernetes.io/name: azure-arc-k8s\n        app.kubernetes.io/component: extension-events-collector\n      annotations:\n        checksum/proxysecret: 04aaf56b6e776464f24481f3883434a0bf5137d460a57a6504ada83b00838570\n        checksum/secrets: 8e8feac2ceda88d9edc248b479c89ea17cf589c648a2f5de99dec80da742920b\n        checksum/azureconfig: a8e8d70172d7dbf909cbd44b452e5a2a48180ecdc31f0954e10c3fa8b69e244c\n        checksum/fluent-bit-config: cd69265806f5fa7328a22ef387f02033ba9cd96d3ef14daeb5fbfb073879f8cb\n    spec:\n      serviceAccountName: azure-arc-operatorsa\n      affinity:\n        nodeAffinity:\n          requiredDuringSchedulingIgnoredDuringExecution:\n            nodeSelectorTerms:\n            - matchExpressions:\n              - key: kubernetes.io/arch\n                operator: In\n                values:\n                - amd64\n                - arm64\n      nodeSelector:\n        kubernetes.io/os: linux\n      hostIPC: false\n      hostPID: false\n      hostNetwork: false\n      containers:\n        - name: extension-events-collector\n          image: \"mcr.microsoft.com/azurearck8s/extension-events-collector:1.21.10\"\n          imagePullPolicy: IfNotPresent\n          resources:\n            limits:\n              cpu: 50m\n              memory: 100Mi\n            requests:\n              cpu: 5m\n              memory: 20Mi\n          envFrom:\n            - configMapRef:\n                name: azure-clusterconfig\n          \n          securityContext:\n            readOnlyRootFilesystem: true\n            allowPrivilegeEscalation: false\n            runAsNonRoot: true\n            runAsUser: 13243\n            runAsGroup: 12434\n          ports:\n          - containerPort: 8082\n        - name: fluent-bit\n          image: \"mcr.microsoft.com/azurearck8s/fluent-bit:1.21.10\"\n          imagePullPolicy: IfNotPresent\n          securityContext:\n            readOnlyRootFilesystem: true\n            \n            capabilities:\n              drop:\n                - ALL\n\n          resources:\n            limits:\n              cpu: 20m\n              memory: 100Mi\n            requests:\n              cpu: 5m\n              memory: 25Mi\n          envFrom:\n            - configMapRef:\n                name: azure-clusterconfig\n          \n          env:\n            - name: POD_NAME\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.name\n            - name: AGENT_TYPE\n              value: \"ConfigAgent\"\n            - name: AGENT_NAME\n              value: \"ExtensionEventsCollector\"\n          volumeMounts:\n          - name: varlog\n            mountPath: /var/log\n            readOnly: true\n          - name: varlibdockercontainers\n            mountPath: /var/lib/docker/containers\n            readOnly: true\n          - name: fluentbit-clusterconfig\n            mountPath: /fluent-bit/etc/\n      volumes:\n        - name: varlog\n          hostPath:\n            path: /var/log\n        - name: varlibdockercontainers\n          hostPath:\n            path: /var/lib/docker/containers\n        - name: fluentbit-clusterconfig\n          configMap:\n            name: azure-fluentbit-config\n---\n# Source: azure-arc-k8sagents/templates/azure-extensionoperator.yaml\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: extension-manager\n  namespace: azure-arc\n  labels:\n    control-plane: extension-manager\n    app.kubernetes.io/name:  azure-arc-k8s\n    app.kubernetes.io/component: extension-manager\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      control-plane: extension-manager\n  template:\n    metadata:\n      labels:\n        control-plane: extension-manager\n        app.kubernetes.io/name:  azure-arc-k8s\n        app.kubernetes.io/component: extension-manager\n      annotations:\n        checksum/proxysecret: 04aaf56b6e776464f24481f3883434a0bf5137d460a57a6504ada83b00838570\n        checksum/azureconfig: a8e8d70172d7dbf909cbd44b452e5a2a48180ecdc31f0954e10c3fa8b69e244c\n        checksum/secrets: 8e8feac2ceda88d9edc248b479c89ea17cf589c648a2f5de99dec80da742920b\n        checksum/fluent-bit-config: cd69265806f5fa7328a22ef387f02033ba9cd96d3ef14daeb5fbfb073879f8cb\n        prometheus.io/scrape: \"true\"\n        prometheus.io/port: \"8080\"\n    spec:\n      serviceAccountName:        \r\n        \"azure-arc-operatorsa\"\n      affinity:\n        nodeAffinity:\n          requiredDuringSchedulingIgnoredDuringExecution:\n            nodeSelectorTerms:\n            - matchExpressions:\n              - key: kubernetes.io/arch\n                operator: In\n                values:\n                - amd64\n                - arm64\n      nodeSelector:\n        kubernetes.io/os: linux\n      hostIPC: false\n      hostPID: false\n      hostNetwork: false\n      containers:\n        - name: manager\n          \n          image: \"mcr.microsoft.com/azurearck8s/extensionoperator:1.21.10\"\n          imagePullPolicy: IfNotPresent\n          env:\n            - name: POD_NAME\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.name\n          envFrom:\n            - configMapRef:\n                name: azure-clusterconfig\n          \n          resources:\n            limits:\n              cpu: 400m\n              memory: 400Mi\n            requests:\n              cpu: 100m\n              memory: 250Mi\n          securityContext:\n            readOnlyRootFilesystem: false\n            \n                \n        - name: healthstatecontroller\n          image: \"mcr.microsoft.com/azurearck8s/healthstatecontroller:1.21.10\"\n          imagePullPolicy: IfNotPresent\n          env:\n            - name: POD_NAME\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.name\n          envFrom:\n            - configMapRef:\n                name: azure-clusterconfig\n          \n          resources:\n            limits:\n              cpu: 200m\n              memory: 200Mi\n            requests:\n              cpu: 100m\n              memory: 100Mi\n          securityContext:\n            readOnlyRootFilesystem: false\n            allowPrivilegeEscalation: false\n          ports:\n            - containerPort: 8443\n              name: debug\n              protocol: TCP\n            - name: metrics\n              containerPort: 8081\n              protocol: TCP\n            - name: health\n              containerPort: 8082\n              protocol: TCP\n          readinessProbe:\n            httpGet:\n              path: /readyz\n              port: health\n          livenessProbe:\n            httpGet:\n              path: /healthz\n              port: health\n          securityContext:\n            capabilities:\n              add:\n                - SYS_PTRACE\n        - name: fluent-bit\n          image: \"mcr.microsoft.com/azurearck8s/fluent-bit:1.21.10\"\n          imagePullPolicy: IfNotPresent\n          securityContext:\n            readOnlyRootFilesystem: true\n            \n            capabilities:\n              drop:\n                - ALL\n\n          resources:\n            limits:\n              cpu: 20m\n              memory: 100Mi\n            requests:\n              cpu: 5m\n              memory: 25Mi\n          envFrom:\n            - configMapRef:\n                name: azure-clusterconfig\n          \n          env:\n            - name: POD_NAME\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.name\n            - name: AGENT_TYPE\n              value: \"ConfigAgent\"\n            - name: AGENT_NAME\n              value: \"ExtensionController\"\n          volumeMounts:\n            - name: varlog\n              mountPath: /var/log\n              readOnly: true\n            - name: varlibdockercontainers\n              mountPath: /var/lib/docker/containers\n              readOnly: true\n            - name: fluentbit-clusterconfig\n              mountPath: /fluent-bit/etc/\n      volumes:\n        - name: varlog\n          hostPath:\n            path: /var/log\n        - name: varlibdockercontainers\n          hostPath:\n            path: /var/lib/docker/containers\n        - name: fluentbit-clusterconfig\n          configMap:\n            name: azure-fluentbit-config\n      terminationGracePeriodSeconds: 10\n---\n# Source: azure-arc-k8sagents/templates/azure-flux-logs-agent-deployment.yaml\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: flux-logs-agent\n  namespace: azure-arc\n  labels:\n    app.kubernetes.io/name: azure-arc-k8s\n    app.kubernetes.io/component: flux-logs-agent\n  annotations:\n    description: A Helm chart for azure-arc-k8sagents\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      app.kubernetes.io/name: azure-arc-k8s\n      app.kubernetes.io/component: flux-logs-agent\n  template:\n    metadata:\n      labels:\n        app.kubernetes.io/name: azure-arc-k8s\n        app.kubernetes.io/component: flux-logs-agent\n      annotations:\n        checksum/proxysecret: 04aaf56b6e776464f24481f3883434a0bf5137d460a57a6504ada83b00838570\n        prometheus.io/scrape: \"true\"\n        prometheus.io/port: \"8080\"\n    spec:\n      serviceAccountName:        \r\n        \"azure-arc-operatorsa\"\n      affinity:\n        nodeAffinity:\n          requiredDuringSchedulingIgnoredDuringExecution:\n            nodeSelectorTerms:\n            - matchExpressions:\n              - key: kubernetes.io/arch\n                operator: In\n                values:\n                - amd64\n                - arm64\n      nodeSelector:\n        kubernetes.io/os: linux\n      hostIPC: false\n      hostPID: false\n      hostNetwork: false\n      containers:\n        - name: flux-logs-agent\n          image: \"mcr.microsoft.com/azurearck8s/flux-logs-agent:1.21.10\"\n          imagePullPolicy: IfNotPresent\n          resources:\n            limits:\n              cpu: 50m\n              memory: 100Mi\n            requests:\n              cpu: 5m\n              memory: 20Mi\n          envFrom:\n            - configMapRef:\n                name: azure-clusterconfig\n          \n\n          securityContext:\n            readOnlyRootFilesystem: true\n            allowPrivilegeEscalation: false\n            runAsNonRoot: true\n            runAsUser: 13243\n            runAsGroup: 12434\n            \n          ports:\n          - containerPort: 8082\n---\n# Source: azure-arc-k8sagents/templates/azure-resource-sync-agent-deployment.yaml\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: resource-sync-agent\n  namespace: azure-arc\n  labels:\n    app.kubernetes.io/name: azure-arc-k8s\n    app.kubernetes.io/component: resource-sync-agent\n  annotations:\n    description: A Helm chart for azure-arc-k8sagents\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      app.kubernetes.io/name: azure-arc-k8s\n      app.kubernetes.io/component: resource-sync-agent\n  template:\n    metadata:\n      labels:\n        app.kubernetes.io/name: azure-arc-k8s\n        app.kubernetes.io/component: resource-sync-agent\n      annotations:\n        checksum/proxysecret: 04aaf56b6e776464f24481f3883434a0bf5137d460a57a6504ada83b00838570\n        checksum/fluent-bit-config: cd69265806f5fa7328a22ef387f02033ba9cd96d3ef14daeb5fbfb073879f8cb\n        extensionEnabled: \"true\"\n        prometheus.io/scrape: \"true\"\n        prometheus.io/port: \"8080\"\n    spec:\n      serviceAccountName:        \r\n        \"azure-arc-operatorsa\"\n      affinity:\n        nodeAffinity:\n          requiredDuringSchedulingIgnoredDuringExecution:\n            nodeSelectorTerms:\n            - matchExpressions:\n              - key: kubernetes.io/arch\n                operator: In\n                values:\n                - amd64\n                - arm64\n      nodeSelector:\n        kubernetes.io/os: linux\n      hostIPC: false\n      hostPID: false\n      hostNetwork: false\n      containers:\n        - name: resource-sync-agent\n          image: \"mcr.microsoft.com/azurearck8s/resource-sync:1.21.10\"\n          imagePullPolicy: IfNotPresent\n          resources:\n            limits:\n              cpu: 100m\n              memory: 300Mi\n            requests:\n              cpu: 20m\n              memory: 100Mi\n          envFrom:\n            - configMapRef:\n                name: azure-clusterconfig\n          \n          env:\n            - name: ENABLE_NAMESPACE_RESOURCES\n              value: \"false\"\n            - name: GOMEMLIMIT\n              value: \"295MiB\"\n          securityContext:\n            readOnlyRootFilesystem: true\n            allowPrivilegeEscalation: false\n            runAsNonRoot: true\n            runAsUser: 13243\n            runAsGroup: 12434\n          \n        - name: fluent-bit\n          image: \"mcr.microsoft.com/azurearck8s/fluent-bit:1.21.10\"\n          imagePullPolicy: IfNotPresent\n          securityContext:\n            readOnlyRootFilesystem: true\n            \n            capabilities:\n              drop:\n                - ALL\n\n          resources:\n            limits:\n              cpu: 20m\n              memory: 100Mi\n            requests:\n              cpu: 5m\n              memory: 25Mi\n          envFrom:\n            - configMapRef:\n                name: azure-clusterconfig\n          \n          env:\n            - name: POD_NAME\n              valueFrom:\n                fieldRef:\n                  fieldPath: metadata.name\n            - name: AGENT_TYPE\n              value: \"ConfigAgent\"\n            - name: AGENT_NAME\n              value: \"ResourceSyncController\"\n          volumeMounts:\n          - name: varlog\n            mountPath: /var/log\n            readOnly: true\n          - name: varlibdockercontainers\n            mountPath: /var/lib/docker/containers\n            readOnly: true\n          - name: fluentbit-clusterconfig\n            mountPath: /fluent-bit/etc/\n      volumes:\n        - name: varlog\n          hostPath:\n            path: /var/log\n        - name: varlibdockercontainers\n          hostPath:\n            path: /var/lib/docker/containers\n        - name: fluentbit-clusterconfig\n          configMap:\n            name: azure-fluentbit-config\n---\n# Source: azure-arc-k8sagents/templates/azure-proxy-secret.yaml\n---\n","hooks":[{"name":"azure-arc","kind":"Job","path":"azure-arc-k8sagents/templates/hooks.yaml","manifest":"apiVersion: batch/v1\nkind: Job\nmetadata:\n  name: \"azure-arc\"\n  namespace: azure-arc\n  labels:\n    app.kubernetes.io/managed-by: \"Helm\"\n    app.kubernetes.io/instance: \"azure-arc\"\n    app.kubernetes.io/version: \"1.0\"\n    helm.sh/chart: \"azure-arc-k8sagents-1.21.10\"\n  annotations:\n    # This is what defines this resource as a hook. Without this line, the\n    # job is considered part of the release.\n    \"helm.sh/hook\": pre-delete\n    \"helm.sh/hook-weight\": \"-5\"\n    \"helm.sh/hook-delete-policy\": hook-succeeded\nspec:\n  template:\n    metadata:\n      name: \"azure-arc\"\n      namespace: azure-arc\n      labels:\n        app.kubernetes.io/managed-by: \"Helm\"\n        app.kubernetes.io/instance: \"azure-arc\"\n        helm.sh/chart: \"azure-arc-k8sagents-1.21.10\"\n    spec:\n      serviceAccountName:        \r\n        \"azure-arc-operatorsa\"\n      restartPolicy: Never\n      affinity:\n        nodeAffinity:\n          requiredDuringSchedulingIgnoredDuringExecution:\n            nodeSelectorTerms:\n            - matchExpressions:\n              - key: kubernetes.io/arch\n                operator: In\n                values:\n                - amd64\n                - arm64\n      nodeSelector:\n        kubernetes.io/os: linux\n      containers:\n        - name: pre-delete-job\n          image: mcr.microsoft.com/oss/kubernetes/kubectl:v1.25.3\n          command: [\"/bin/bash\"]\n          args:\n            - -c\n            - |\n              kubectl delete crd gitconfigs.clusterconfig.azure.com extensionconfigs.clusterconfig.azure.com connectedclusters.arc.azure.com --ignore-not-found              \n              kubectl scale deployment config-agent -n azure-arc --replicas=0\n              kubectl scale deployment extension-manager -n azure-arc --replicas=0\n              # Ensure that if any extensionconfigs are stuck in terminating state, they are deleted\n              kubectl get extensionconfigs.clusterconfig.azure.com -A -o=json | kubectl patch --type=merge -f - -p '{\"metadata\":{\"finalizers\":[]}}' -o json | kubectl apply -f -\n              kubectl delete crd extensionconfigs.clusterconfig.azure.com --ignore-not-found","events":["pre-delete"],"last_run":{"started_at":"","completed_at":"","phase":""},"weight":-5,"delete_policies":["hook-succeeded"]}],"version":1,"namespace":"azure-arc-release"}
